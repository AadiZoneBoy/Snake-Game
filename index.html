<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snake Legends Pro</title>
<style>
  body{
    margin:0;
    background:#222;
    color:#fff;
    font-family:system-ui, sans-serif;
    text-align:center;
  }
  h1{margin:10px 0;}
  canvas{
    background:#111;
    border:4px solid #4caf50;
    display:block;
    margin:0 auto;
  }
  .stats{margin:10px 0;}
  button{
    margin-top:10px;
    padding:8px 18px;
    border:none;
    border-radius:8px;
    background:#4caf50;
    color:#fff;
    font-size:16px;
    cursor:pointer;
  }
  button:hover{background:#66bb6a;}
</style>
</head>
<body>
  <h1>Snake Legends Pro üçè</h1>
  <div class="stats">
    Score: <span id="score">0</span> |
    Level: <span id="level">1</span>
  </div>
  <canvas id="gameCanvas" width="500" height="500"></canvas>
  <button id="restartBtn">Restart</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const box = 20;

let snake, dir, food, score, level, speed, game;
const apple = new Image();
apple.src = "https://cdn-icons-png.flaticon.com/512/415/415733.png"; // apple icon

function reset(){
  snake = [
    {x:9*box, y:10*box},
    {x:8*box, y:10*box},
    {x:7*box, y:10*box}
  ];
  dir = 'RIGHT';
  score = 0;
  level = 1;
  speed = 150;
  spawnFood();
  updateStats();
  clearInterval(game);
  game = setInterval(draw, speed);
}

function spawnFood(){
  food = {
    x: Math.floor(Math.random()* (canvas.width/box)) * box,
    y: Math.floor(Math.random()* (canvas.height/box)) * box
  };
}

function updateStats(){
  document.getElementById('score').textContent = score;
  document.getElementById('level').textContent = level;
}

document.addEventListener('keydown', e=>{
  if(e.key==="ArrowLeft" && dir!=='RIGHT') dir='LEFT';
  else if(e.key==="ArrowUp" && dir!=='DOWN') dir='UP';
  else if(e.key==="ArrowRight" && dir!=='LEFT') dir='RIGHT';
  else if(e.key==="ArrowDown" && dir!=='UP') dir='DOWN';
});

document.getElementById('restartBtn').addEventListener('click', reset);

function draw(){
  ctx.fillStyle = "#111";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // draw apple
  ctx.drawImage(apple, food.x, food.y, box, box);

  // draw snake: head with a brighter color, body with smooth segments
  snake.forEach((segment,i)=>{
    ctx.fillStyle = i===0 ? "#4caf50" : "#66bb6a";
    ctx.fillRect(segment.x, segment.y, box, box);
    ctx.strokeStyle = "#000";
    ctx.strokeRect(segment.x, segment.y, box, box);
  });

  // calculate new head position
  let head = { x: snake[0].x, y: snake[0].y };
  if(dir==='LEFT') head.x -= box;
  if(dir==='UP') head.y -= box;
  if(dir==='RIGHT') head.x += box;
  if(dir==='DOWN') head.y += box;

  // check food collision
  if(head.x===food.x && head.y===food.y){
    score++;
    if(score % 5 === 0){
      level++;
      speed = Math.max(60, speed - 10);
      clearInterval(game);
      game = setInterval(draw, speed);
    }
    updateStats();
    spawnFood();
  }else{
    snake.pop(); // remove tail if no food eaten
  }

  // collision with wall or self
  if(head.x<0 || head.x>=canvas.width || head.y<0 || head.y>=canvas.height ||
     snake.some(seg => seg.x===head.x && seg.y===head.y)){
    clearInterval(game);
    alert("Game Over! Final Score: " + score);
    return;
  }

  snake.unshift(head);
}

reset();
</script>
</body>
</html>
